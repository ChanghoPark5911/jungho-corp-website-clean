# 정호그룹 홈페이지 배포 매뉴얼

---

**문서 정보**

| 항목 | 내용 |
|------|------|
| 문서명 | 정호그룹 홈페이지 배포 매뉴얼 |
| 버전 | 2.0 |
| 최종 수정일 | 2025년 12월 22일 |
| 대상 | IT 담당자, 시스템 관리자 |
| 난이도 | 중급 |

---

## 목차

1. 배포 개요
2. 사전 준비사항
3. 방법 1: 가비아 호스팅 배포 (권장) ⭐
4. 방법 2: Vercel 자동 배포
5. .htaccess 설정 (SPA 라우팅)
6. 배포 후 확인사항
7. 문제 해결
8. 롤백 방법
9. 정기 유지보수

---

## 1. 배포 개요

### 1.1 배포란?

배포(Deployment)란 개발 환경에서 작업한 홈페이지를 실제 사용자가 접속할 수 있는 서버에 올리는 과정입니다.

### 1.2 배포 방법 비교

| 방법 | 서버 | 장점 | 단점 | 권장 용도 |
|------|------|------|------|-----------|
| **가비아 호스팅** | 가비아 | 기존 서비스 활용, 이메일 영향 없음, 도메인 설정 불필요 | 수동 업로드 필요 | **운영 배포 (권장)** |
| Vercel | Vercel | 자동 배포, 무료 | 도메인 DNS 변경 필요 | 테스트/스테이징 |

### 1.3 현재 상태

| 항목 | 현재 값 |
|------|---------|
| 운영 도메인 | www.junghocorp.com |
| 호스팅 | 가비아 웹호스팅 |
| 이메일 | 가비아 이메일 서비스 (MX 레코드) |
| 테스트 URL | https://jungho-corp-website-clean.vercel.app |

**⚠️ 중요: 가비아 호스팅을 유지해야 회사 이메일이 정상 작동합니다.**

---

## 2. 사전 준비사항

### 2.1 필요한 소프트웨어

| 소프트웨어 | 용도 | 다운로드 |
|------------|------|----------|
| Node.js 18+ | 빌드 실행 | https://nodejs.org |
| FileZilla | FTP 업로드 | https://filezilla-project.org |
| 텍스트 에디터 | .htaccess 편집 | VS Code, 메모장 등 |

### 2.2 가비아 FTP 정보 확인

**FTP 정보 확인 방법:**
```
1. 가비아 (gabia.com) 로그인
2. My가비아 > 호스팅 관리
3. 사용 중인 호스팅 선택
4. FTP 정보 확인:
   - FTP 호스트: (예: ftp.junghocorp.com)
   - FTP 아이디: (예: junghocorp)
   - FTP 비밀번호: (초기 설정 또는 변경한 비밀번호)
   - 포트: 21
```

### 2.3 프로젝트 폴더 위치

```
C:\Work\jungho-corp-website-clean\
├── build\           ← 빌드 결과물 (이 폴더를 업로드)
├── public\          ← 정적 파일 (빌드에 포함됨)
├── src\             ← 소스 코드
├── docs\            ← 운영 문서
└── package.json     ← 프로젝트 설정
```

---

## 3. 방법 1: 가비아 호스팅 배포 (권장) ⭐

### 3.1 Step 1: 프로젝트 빌드

**명령 프롬프트(PowerShell) 실행:**

```powershell
# 1. 프로젝트 폴더로 이동
cd C:\Work\jungho-corp-website-clean

# 2. 빌드 실행
npm run build
```

**빌드 완료 확인:**
```
The build folder is ready to be deployed.
```

**빌드 결과:**
- `build` 폴더에 배포용 파일이 생성됩니다
- 이 폴더의 모든 파일을 서버에 업로드합니다

### 3.2 Step 2: .htaccess 파일 준비

**SPA(Single Page Application) 라우팅을 위해 필수입니다.**

1. `build` 폴더에 `.htaccess` 파일 생성 (메모장으로)
2. 아래 내용 복사하여 붙여넣기:

```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

# 캐시 설정 (선택사항)
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/html "access plus 0 seconds"
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
</IfModule>

# Gzip 압축 (선택사항)
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/css application/javascript application/json
</IfModule>
```

3. **파일명 주의**: `.htaccess` (점으로 시작, 확장자 없음)
4. **인코딩**: UTF-8 without BOM

### 3.3 Step 3: FileZilla 설정 및 연결

**FileZilla 설정:**
```
1. FileZilla 실행
2. 상단 빠른 연결 영역:
   - 호스트(H): [가비아 FTP 호스트]
   - 사용자명(U): [가비아 FTP 아이디]
   - 비밀번호(P): [가비아 FTP 비밀번호]
   - 포트(P): 21
3. [빠른 연결] 클릭
```

**연결 실패 시:**
```
1. FileZilla > 편집 > 설정
2. 연결 > FTP > 전송 모드 > "수동" 선택
3. 연결 > FTP > "능동 모드로 전환" 체크 해제
4. 다시 연결 시도
```

### 3.4 Step 4: 파일 업로드

**FileZilla 화면 구성:**

```
┌─────────────────────────────────────────────────────────────┐
│ FileZilla                                                   │
├────────────────────────────┬────────────────────────────────┤
│ 로컬 사이트 (내 컴퓨터)    │ 원격 사이트 (가비아 서버)      │
│                            │                                │
│ C:\Work\jungho-corp-       │ /html/ 또는 /public_html/      │
│   website-clean\build\     │                                │
│                            │                                │
│ ├── static\                │                                │
│ ├── images\                │                                │
│ ├── data\                  │                                │
│ ├── documents\             │                                │
│ ├── index.html             │                                │
│ ├── .htaccess              │                                │
│ └── ...                    │                                │
└────────────────────────────┴────────────────────────────────┘
```

**업로드 절차:**

```
1. 왼쪽(로컬): build 폴더로 이동
   C:\Work\jungho-corp-website-clean\build

2. 오른쪽(원격): 웹 루트 폴더로 이동
   - 보통 /html/ 또는 /public_html/ 또는 /www/
   - 가비아 호스팅 설정에서 확인

3. ⚠️ 기존 파일 백업 (권장)
   - 서버의 기존 파일들을 backup_YYYYMMDD 폴더로 이동
   - 또는 로컬에 다운로드

4. build 폴더 안의 모든 파일 업로드
   - Ctrl + A로 전체 선택
   - 오른쪽 원격 사이트로 드래그 앤 드롭
   - 또는 우클릭 > 업로드

5. 전송 완료 대기
   - 하단 전송 상태 확인
   - 약 2-5분 소요 (파일 수에 따라 다름)
```

**업로드 파일 목록:**

| 파일/폴더 | 설명 | 필수 |
|-----------|------|------|
| index.html | 메인 HTML | ✅ |
| .htaccess | SPA 라우팅 설정 | ✅ |
| static/ | CSS, JavaScript | ✅ |
| images/ | 이미지 파일 | ✅ |
| data/ | JSON 데이터 | ✅ |
| documents/ | PDF 카탈로그 | ✅ |
| manifest.json | PWA 설정 | ✅ |
| favicon*.png | 파비콘 | ✅ |
| robots.txt | 검색엔진 설정 | ⭕ |
| sitemap.xml | 사이트맵 | ⭕ |

### 3.5 Step 5: 배포 확인

```
1. 웹 브라우저에서 www.junghocorp.com 접속

2. 캐시 무시 새로고침
   - Windows: Ctrl + Shift + R
   - Mac: Cmd + Shift + R

3. 주요 페이지 테스트:
   □ 메인 홈페이지
   □ 계열사 페이지 (클라루스, 정호티엘씨, 일루텍, 정호텍스컴)
   □ 프로젝트 갤러리
   □ 미디어/PR
   □ 고객지원
   □ 모바일 화면 (스마트폰으로 확인)
   □ 다국어 전환 (한국어/영어/중국어/일본어)
   □ 다크모드 전환
```

---

## 4. 방법 2: Vercel 자동 배포

### 4.1 Vercel 배포 개요

Vercel은 GitHub 저장소와 연결되어 코드 변경 시 자동으로 배포됩니다.

```
코드 수정 → Git Commit → Git Push → Vercel 자동 배포 (약 1-2분)
```

### 4.2 수동 배포 명령

```powershell
# 프로젝트 폴더에서 실행
cd C:\Work\jungho-corp-website-clean

# 변경사항 커밋
git add -A
git commit -m "콘텐츠 업데이트: YYYY-MM-DD"

# GitHub에 푸시 (자동 배포 트리거)
git push origin main

# 배포 URL 확인 (약 1-2분 후)
# https://jungho-corp-website-clean.vercel.app
```

### 4.3 프로덕션 직접 배포

```powershell
# Vercel CLI를 사용한 직접 배포
npx vercel --prod --yes
```

### 4.4 배포 상태 확인

```
1. Vercel 대시보드 접속: https://vercel.com/dashboard
2. 프로젝트 선택
3. Deployments 탭에서 상태 확인:
   - Building: 빌드 중
   - Ready: 배포 완료 ✅
   - Error: 오류 발생 ❌
```

---

## 5. .htaccess 설정 (SPA 라우팅)

### 5.1 왜 필요한가?

React는 Single Page Application(SPA)으로, 모든 URL 요청이 `index.html`을 통해 처리되어야 합니다.

**문제 상황:**
```
www.junghocorp.com/subsidiaries/clarus 직접 접속 시
→ 서버에 /subsidiaries/clarus 파일이 없으므로 404 오류
```

**해결:**
```
.htaccess로 모든 요청을 index.html로 리다이렉트
→ React Router가 URL을 처리
```

### 5.2 .htaccess 파일 위치

```
build/
├── .htaccess      ← 여기에 위치
├── index.html
├── static/
└── ...
```

### 5.3 .htaccess 내용

```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```

---

## 6. 배포 후 확인사항

### 6.1 필수 확인 체크리스트

| 확인 항목 | 확인 방법 | 상태 |
|-----------|-----------|------|
| 메인 페이지 로딩 | www.junghocorp.com 접속 | □ |
| 하위 페이지 직접 접속 | /subsidiaries/clarus 직접 URL 입력 | □ |
| 메뉴 작동 | 각 메뉴 클릭하여 이동 | □ |
| 이미지 표시 | 프로젝트 갤러리 이미지 확인 | □ |
| PDF 다운로드 | 기술자료실 PDF 다운로드 | □ |
| 다국어 전환 | 언어 변경 버튼 테스트 | □ |
| 다크모드 | 다크모드 토글 테스트 | □ |
| 모바일 화면 | 스마트폰으로 접속 | □ |
| 관리자 페이지 | /admin 접속 | □ |

### 6.2 브라우저별 테스트

| 브라우저 | 테스트 결과 |
|----------|-------------|
| Chrome (PC) | □ |
| Edge (PC) | □ |
| Safari (Mac) | □ |
| Chrome (Android) | □ |
| Safari (iPhone) | □ |

### 6.3 성능 확인

**Google PageSpeed Insights:**
```
1. https://pagespeed.web.dev 접속
2. www.junghocorp.com 입력
3. 분석 결과 확인:
   - 모바일 점수: 70점 이상 권장
   - 데스크톱 점수: 80점 이상 권장
```

---

## 7. 문제 해결

### 7.1 빌드 오류

**증상:** `npm run build` 실행 시 오류 발생

**해결 방법:**
```powershell
# Node.js 버전 확인 (18 이상 필요)
node --version

# 패키지 재설치
Remove-Item -Recurse -Force node_modules
npm install

# 다시 빌드
npm run build
```

### 7.2 FTP 연결 실패

**증상:** FileZilla에서 서버 연결 안됨

**해결 방법:**
```
1. FTP 정보 재확인 (가비아 > 호스팅 > FTP 정보)
2. 패시브 모드 시도:
   FileZilla > 편집 > 설정 > 연결 > FTP > 전송 모드 > 수동
3. 방화벽에서 포트 21 허용 확인
```

### 7.3 페이지 404 오류

**증상:** 하위 페이지(/subsidiaries/clarus 등) 직접 접속 시 404 오류

**해결 방법:**
```
1. .htaccess 파일이 서버에 업로드되었는지 확인
2. .htaccess 파일 내용이 올바른지 확인
3. 가비아 호스팅에서 mod_rewrite 활성화 확인
   - 가비아 My페이지 > 호스팅 설정 > Apache 모듈
```

### 7.4 이미지 로딩 실패

**증상:** 이미지가 깨져서 표시됨

**해결 방법:**
```
1. images 폴더 전체가 업로드되었는지 확인
2. 파일 경로 대소문자 확인 (.jpg vs .JPG)
3. 브라우저 캐시 삭제 후 재확인
```

### 7.5 CSS/JS 로딩 실패

**증상:** 스타일이 적용되지 않거나 페이지가 작동하지 않음

**해결 방법:**
```
1. static 폴더 전체가 업로드되었는지 확인
2. 개발자 도구(F12) > Console 탭에서 오류 확인
3. Network 탭에서 실패한 요청 확인
```

---

## 8. 롤백 방법

### 8.1 가비아 호스팅 롤백

**백업이 있는 경우:**
```
1. FileZilla로 서버 접속
2. 현재 파일들을 다른 폴더로 이동 (예: backup_failed)
3. 백업 파일들을 웹 루트로 이동
4. 웹사이트 확인
```

**백업이 없는 경우:**
```
1. 로컬에서 이전 버전으로 빌드
   git checkout [이전 커밋 해시]
   npm run build
2. build 폴더 업로드
3. 최신 버전으로 복구
   git checkout main
```

### 8.2 Vercel 롤백

```
1. Vercel 대시보드 접속
2. 프로젝트 > Deployments
3. 이전 배포 버전 찾기
4. "..." 메뉴 > "Promote to Production"
5. 확인
```

---

## 9. 정기 유지보수

### 9.1 일일 점검

| 점검 항목 | 방법 |
|-----------|------|
| 메인 페이지 로딩 | www.junghocorp.com 접속 확인 |
| 페이지 응답 속도 | 3초 이내 로딩 확인 |

### 9.2 주간 점검

| 점검 항목 | 방법 |
|-----------|------|
| 전체 메뉴 동작 | 모든 메뉴 클릭 테스트 |
| 이미지 로딩 | 프로젝트 갤러리 전체 확인 |
| 다국어 기능 | 4개 언어 전환 테스트 |
| 모바일 화면 | 스마트폰 접속 테스트 |

### 9.3 월간 점검

| 점검 항목 | 방법 |
|-----------|------|
| SSL 인증서 | 만료일 확인 (가비아에서 자동 갱신) |
| 디스크 용량 | 가비아 호스팅 용량 확인 |
| 백업 | 전체 파일 로컬 백업 |

### 9.4 정기 백업

```powershell
# 로컬 백업 폴더 생성
$date = Get-Date -Format "yyyyMMdd"
$backupDir = "C:\Backup\junghocorp-$date"
New-Item -ItemType Directory -Path $backupDir -Force

# 프로젝트 전체 복사
Copy-Item -Path "C:\Work\jungho-corp-website-clean\*" -Destination $backupDir -Recurse
```

---

## 부록: 빠른 참조 가이드

### 배포 명령어 요약

```powershell
# 프로젝트 폴더로 이동
cd C:\Work\jungho-corp-website-clean

# 빌드
npm run build

# build 폴더를 FileZilla로 가비아 서버에 업로드
```

### 주요 경로

| 항목 | 경로 |
|------|------|
| 프로젝트 폴더 | C:\Work\jungho-corp-website-clean |
| 빌드 결과물 | C:\Work\jungho-corp-website-clean\build |
| 이미지 폴더 | public\images |
| 데이터 폴더 | public\data |
| 문서 폴더 | public\documents |

### 연락처

| 구분 | 담당 | 연락처 |
|------|------|--------|
| 호스팅 문의 | 가비아 고객센터 | 1544-4370 |
| 기술 지원 | IT 담당자 | 내선 XXXX |

---

**문서 끝**
